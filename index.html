<!DOCTYPE html>
<html>
    <head>
        <title>Sam Watson</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/bubbly-bg@1.0.0/dist/bubbly-bg.js"></script>
        <script>
            let hex = [];
            let hsl = ``
            let darkMode = window.matchMedia('(prefers-color-scheme: dark)');
            
            // Check view mode and change background accordingly
            // Ran initially
            if (darkMode.matches) {
                hex = ["#442222", "#111111"];
                hsl = `hsla(0, 100%, 50%, ${Math.random() * 0.25})`;
                
                // console.log("currently in dark mode");
            } else {
                hex = ["#9AD1D4", "#003249"];
                hsl = `hsla(195, 100%, 33%, ${Math.random() * 0.25})`;
                
                // console.log("not in dark mode");
            }
            // Ran everytime it changes
            darkMode.addEventListener('change', event => {
                if (event.matches) {
                     //dark mode
                    hex = ["#442222", "#111111"];
                    hsl = `hsla(0, 100%, 50%, ${Math.random() * 0.25})`;
                    console.log("currently in dark mode");
                    bubbly({
                        colorStart: hex[0],
                        colorStop: hex[1],
                        blur: 2,
                        bubbleFunc: () => hsl
                    });
                } else {
                    //light mode
                    hex = ["#9AD1D4", "#003249"];
                    hsl = `hsla(195, 100%, 33%, ${Math.random() * 0.25})`;
                    console.log("not in dark mode");
                    bubbly({
                        colorStart: hex[0],
                        colorStop: hex[1],
                        blur: 2,
                        bubbleFunc: () => hsl
                    });
                }
            })
            bubbly({
                colorStart: hex[0],
                colorStop: hex[1],
                blur: 2,
                bubbleFunc: () => hsl
            });
        </script>
        <div class="title">
        <h1>Sam Watson</h1>
        <!-- Show titles -->
        <div id="sequence">iOS Developer</div>
        </div>
        <!-- Loop Through Titles-->
        <script>
            let titles = ["iOS Developer", "Web Developer", "Archer"];
            let randNumber = (Math.random() * 1000) + 500;
            textSequence(0);

            function textSequence(i) {
                if (titles.length > i) {
                    setTimeout(function() {
                        document.getElementById("sequence").innerHTML = titles[i];
                        textSequence(++i);
                    }, randNumber);
                } else if (titles.length == i) {
                    textSequence(0)
                }
            }
        </script>
        <div class="socials">
            <a href="https://github.com/Sam0the0man" target="_blank"><span id="gitHub"></span></a>
            <a href="https://linkedin.com" target="_blank"><img src="Assets/LI-In-Bug.png" width="32"></a>
        <a href="https://apps.apple.com/us/app/bulls-eye-game/id1493302230" target="_blank"><span id="iOS_App"></span></a>
        </div>
        <script>
            // Check if iOS Device and add app is it is
            let iOSDevice = !!navigator.platform.match(/iPhone|iPod|iPad/);
            if (iOSDevice) {
                let img = document.createElement("img");
                img.src = "Assets/Bullseye_Image.png";
                img.width = "32"
                let src = document.getElementById("iOS_App");
                src.appendChild(img);
            }
            // Check view mode and add github logo accordingly
            // Ran initially
            let gitSrc = document.getElementById("gitHub");
            let oldIMG;
            if (darkMode.matches) {
                let img = document.createElement("img");
                img.src = "Assets/GitHub-Mark-Light-32px.png";
                img.width = "32";
                console.log(item);
                gitSrc.appendChild(img);
                oldIMG = img;
                // console.log("currently in dark mode");
            } else {
                let img = document.createElement("img");
                img.src = "Assets/GitHub-Mark-32px.png";
                img.width = "32";
                gitSrc.appendChild(img);
                oldIMG = img;
                // console.log("not in dark mode");
            }
            // Ran everytime it changes
            darkMode.addEventListener('change', event => {
                if (event.matches) {
                     //dark mode
                     let img = document.createElement("img");
                    img.src = "Assets/GitHub-Mark-Light-32px.png";
                    img.width = "32";
                    setLogo(img);
                    // console.log("currently in dark mode");
                } else {
                    //light mode
                    let img = document.createElement("img");
                    img.src = "Assets/GitHub-Mark-32px.png";
                    img.width = "32";
                    setLogo(img);
                    // console.log("not in dark mode");
                }
            })

            function setLogo(logo) {
                console.log(gitSrc);
                gitSrc.replaceChild(logo, oldIMG)
                oldIMG = logo
            }
        </script>
    </body>
</html>